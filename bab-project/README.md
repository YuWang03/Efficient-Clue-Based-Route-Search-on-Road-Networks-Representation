# BAB 演算法與本專案實作說明

## 什麼是 BAB（Branch and Bound）演算法？

BAB（分支定界）是一種用於組合優化問題的搜尋演算法。它的核心思想是：
- **分支**：將問題拆分成多個子問題（例如路徑上的每一步選擇）。
- **定界**：利用上界（Upper Bound）和下界（Lower Bound）來剪枝，排除不可能成為最優解的分支，提升搜尋效率。

在路徑搜尋場景下，BAB 可以用來尋找同時滿足多個「線索」條件的最優路徑，例如：
- 路徑必須經過某些關鍵字（POI）
- 距離必須在容忍範圍內
- 匹配距離最小化

## 本專案的 BAB 實作流程

1. **資料結構初始化**  
   - 解析 OSM 路網，建立節點、邊、關鍵字索引
   - 支援多關鍵字查詢

2. **查詢設定**  
   - 使用者可指定起點、線索（關鍵字、距離、容忍度）

3. **BAB 搜尋主流程**  
   - 以起點為根節點，逐層分支搜尋
   - 每層根據線索條件，尋找符合距離與關鍵字的候選節點
   - 計算匹配距離，若超過上界則剪枝
   - 若找到完整路徑，更新最優解

4. **路徑重建與視覺化**  
   - 使用 Dijkstra 算法重建每段路徑，確保路徑沿著真實道路網絡（不穿越建築物）
   - 前端用 Leaflet 地圖繪製完整路徑與節點
   - 支援步驟動畫、路徑細節展示

## 你的前端/路網實作重點

- **地圖互動**：用 Leaflet 顯示 OSM 路網，支援起點選擇、線索輸入
- **資料載入**：自動載入 `graph_data.json`，初始化節點、邊、關鍵字索引
- **路徑搜尋**：呼叫 BAB 演算法，根據使用者設定動態搜尋最優路徑
- **路徑重建**：每段 POI 之間都用 Dijkstra 算法重建完整道路節點序列，避免直線穿越建築物
- **視覺化**：用綠色粗線繪製完整路徑，POI 用大頭針標記，中間節點用小圓點標記
- **動畫/步驟展示**：可逐步顯示搜尋過程、剪枝、回溯等狀態

## 特色與優化

- 支援多線索複合查詢
- 路徑完全沿著真實道路網絡
- 前端互動友善，查詢結果即時可視化
- 可擴充支援更多路網資料或查詢條件

